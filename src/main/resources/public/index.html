<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Weather Queue</title>
    <!--<script src="./js/jquery.js"></script>
    <script src="./js/bootstrap.min.js"></script>
    <script src="./js/jquery.datTables.min.js"></script>
    <script src="/js/dataTables.bootstrap.js"></script>
    <script src="./js/script.js"></script>
    <link src="./css/bootstrap.min.css">
    <link src="./css/dataTables.bootstrap.css">
    <link src="./css/jquery.dataTables.min.css">-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <link rel="stylesheet" href="http://cdn.datatables.net/1.10.7/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="http://cdn.datatables.net/plug-ins/1.10.7/integration/bootstrap/3/dataTables.bootstrap.css">
    <script src="http://cdn.datatables.net/1.10.7/js/jquery.dataTables.min.js"></script>
    <script src="http://cdn.datatables.net/plug-ins/1.10.7/integration/bootstrap/3/dataTables.bootstrap.js"></script>
</head>
<body>
<button>Refresh</button>
<table id="example" class="display" cellspacing="0" width="100%">
    <thead>
    <tr>
        <th>Country Name</th>
        <th>City Name</th>
        <th>Temperature</th>
        <th>Type</th>
        <th>Last Updated</th>
    </tr>
    </thead>
</table>
</body>
<script>
    $(document).ready(function() {
        var dataSet1 = [{"id":1101,"countryCode":"IN","countryName":"India","cityCode":"IN","cityName":"Chennai","lastPooledTemperature":79.4,"weatherType":"CURRENT","createdAt":1519577002157,"updatedAt":1519577002157},{"id":1093,"countryCode":"IN","countryName":"India","cityCode":"IN","cityName":"Chennai","lastPooledTemperature":79.4,"weatherType":"LAST_POOLED","createdAt":1519576984273,"updatedAt":1519577002180},{"id":1102,"countryCode":"IN","countryName":"India","cityCode":"IN","cityName":"Bangalore","lastPooledTemperature":72.4,"weatherType":"CURRENT","createdAt":1519577002530,"updatedAt":1519577002530},{"id":1094,"countryCode":"IN","countryName":"India","cityCode":"IN","cityName":"Bangalore","lastPooledTemperature":72.4,"weatherType":"LAST_POOLED","createdAt":1519576984681,"updatedAt":1519577002542},{"id":1103,"countryCode":"IN","countryName":"India","cityCode":"IN","cityName":"Mumbai","lastPooledTemperature":86.0,"weatherType":"CURRENT","createdAt":1519577002972,"updatedAt":1519577002972},{"id":1095,"countryCode":"IN","countryName":"India","cityCode":"IN","cityName":"Mumbai","lastPooledTemperature":86.0,"weatherType":"LAST_POOLED","createdAt":1519576985108,"updatedAt":1519577002980},{"id":1104,"countryCode":"IN","countryName":"India","cityCode":"IN","cityName":"Kolkata","lastPooledTemperature":79.4,"weatherType":"CURRENT","createdAt":1519577003372,"updatedAt":1519577003372},{"id":1096,"countryCode":"IN","countryName":"India","cityCode":"IN","cityName":"Kolkata","lastPooledTemperature":79.4,"weatherType":"LAST_POOLED","createdAt":1519576985545,"updatedAt":1519577003388},{"id":1105,"countryCode":"US","countryName":"USA","cityCode":"CA","cityName":"San_Francisco","lastPooledTemperature":50.1,"weatherType":"CURRENT","createdAt":1519577003839,"updatedAt":1519577003839},{"id":1097,"countryCode":"US","countryName":"USA","cityCode":"CA","cityName":"San_Francisco","lastPooledTemperature":50.1,"weatherType":"LAST_POOLED","createdAt":1519576986046,"updatedAt":1519577003857},{"id":1106,"countryCode":"US","countryName":"USA","cityCode":"MA","cityName":"Boston","lastPooledTemperature":41.4,"weatherType":"CURRENT","createdAt":1519577004290,"updatedAt":1519577004290},{"id":1098,"countryCode":"US","countryName":"USA","cityCode":"MA","cityName":"Boston","lastPooledTemperature":41.4,"weatherType":"LAST_POOLED","createdAt":1519576986683,"updatedAt":1519577004309},{"id":1107,"countryCode":"US","countryName":"USA","cityCode":"NY","cityName":"New_York","lastPooledTemperature":41.5,"weatherType":"CURRENT","createdAt":1519577004819,"updatedAt":1519577004819},{"id":1099,"countryCode":"US","countryName":"USA","cityCode":"NY","cityName":"New_York","lastPooledTemperature":41.5,"weatherType":"LAST_POOLED","createdAt":1519576987142,"updatedAt":1519577004823},{"id":1108,"countryCode":"US","countryName":"USA","cityCode":"DC","cityName":"Washington","lastPooledTemperature":48.7,"weatherType":"CURRENT","createdAt":1519577005204,"updatedAt":1519577005204},{"id":1100,"countryCode":"US","countryName":"USA","cityCode":"DC","cityName":"Washington","lastPooledTemperature":48.7,"weatherType":"LAST_POOLED","createdAt":1519576987593,"updatedAt":1519577005220}];
        $('#example').dataTable( {
            "destroy":true, //To delete previous DataTable instance
            "data": dataSet1, //Link the dataset
            "iDisplayLength": 8, //Number of dataitems in one page
            "bLengthChange": false, //Change this to 'true', to choose number of items per page
            "columns": [ // Table column names
                { "data": "countryName" },
                { "data": "cityName" },
                { "data": "lastPooledTemperature" },
                { "data": "weatherType" },
                { "data": "updatedAt" }
            ],
        });
        $("button").click(function(){
            $.get("http://localhost:8080/api/weather", function(data, status){
                console.log(JSON.stringify(data));
                dataSet1 = data;
                $('#example').dataTable( {
                    "destroy":true, //To delete previous DataTable instance
                    "data": dataSet1, //Link the dataset
                    "iDisplayLength": 8, //Number of dataitems in one page
                    "bLengthChange": false, //Change this to 'true', to choose number of items per page
                    "columns": [ // Table column names
                        { "data": "countryName" },
                        { "data": "cityName" },
                        { "data": "lastPooledTemperature" },
                        { "data": "weatherType" },
                        { "data": "updatedAt" }
                    ],
                });
            });
        });
    });
</script>
</html>